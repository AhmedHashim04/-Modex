{% comment %} {% extends 'base.html' %} {% endcomment %}
{% load static i18n %}

{% block content %} 
<!-- البانر الرئيسي (هيرو) -->
<section class="hero-section">
    <div class="container">
        <div class="hero-slider">
            {% for banner in main_banners %}
            <div class="hero-item">
                <img src="{{ banner.image.url }}" alt="{{ banner.collection.name }}" class="img-fluid">
                <div class="hero-content">
                    <h2>{{ banner.collection.name }}</h2>
                    <p>{{ banner.offer }}</p>
                    <a href="{{ banner.collection.get_absolute_url }}" class="btn btn-primary">{% trans "Shop Now" %}</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- الأقسام الرئيسية -->
<section class="categories-section py-5">
    <div class="container">
        <h2 class="section-title text-center mb-5">{% trans "Shop By Category" %}</h2>
        <div class="row">
            {% for category in main_categories %}
            <div class="col-md-3 col-6 mb-4">
                <a href="" class="category-card">
                    <div class="card">
                        <img src="{{ category.image.url }}" class="card-img-top" alt="{{ category.name }}">
                        <div class="card-body text-center">
                            <h5 class="card-title">{{ category.name }}</h5>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- المنتجات المميزة -->
<section class="featured-products py-5 bg-light">
    <div class="container">
        <div class="section-header d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title">{{ featured_products_section.title }}</h2>
            <a href="{% url 'product:products_list' %}" class="btn btn-outline-primary">{% trans "View All" %}</a>
        </div>
        
        {% if featured_products_section.layout == 'carousel' %}
        <div class="products-carousel">
            {% for featured in featured_products_section.products %}
            <div class="product-item">
                {% include 'product/partials/product_card.html' with product=featured.product %}
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="row">
            {% for featured in featured_products_section.products %}
            <div class="col-lg-3 col-md-4 col-6 mb-4">
                {% include 'product/partials/product_card.html' with product=featured.product %}
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</section>

<!-- أحدث المنتجات -->
<section class="new-products py-5">
    <div class="container">
        <div class="section-header d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title">{{ new_products_section.title }}</h2>
            <a href="" class="btn btn-outline-primary">{% trans "View All" %}</a>
        </div>
        
        <div class="row">
            {% for product in new_products_section.products %}
            <div class="col-lg-3 col-md-4 col-6 mb-4">
                {% include 'product/partials/product_card.html' %}
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- الأكثر تقييماً -->
<section class="top-rated py-5 bg-light">
    <div class="container">
        <div class="section-header d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title">{{ top_rated_section.title }}</h2>
            <a href="" class="btn btn-outline-primary">{% trans "View All" %}</a>
        </div>
        
        <div class="products-carousel">
            {% for product in top_rated_section.products %}
            <div class="product-item">
                {% include 'product/partials/product_card.html' %}
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- العروض الخاصة -->
<section class="discounts-section py-5">
    <div class="container">
        <div class="section-header d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title">{{ discounts_section.title }}</h2>
            <a href="" class="btn btn-outline-primary">{% trans "View All" %}</a>
        </div>
        
        <div class="row">
            {% for product in discounts_section.products %}
            <div class="col-lg-3 col-md-4 col-6 mb-4">
                {% include 'product/partials/product_card.html' %}
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- المجموعات المميزة -->
<section class="collections-section py-5 bg-light">
    <div class="container">
        <h2 class="section-title text-center mb-5">{{ collections_section.title }}</h2>
        <div class="row">
            {% for collection in collections_section.collections %}
            <div class="col-md-4 col-6 mb-4">
                <div class="collection-card">
                    <a href="{{ collection.get_absolute_url }}">
                        <img src="{{ collection.image.url }}" alt="{{ collection.name }}" class="img-fluid">
                        <div class="collection-info">
                            <h3>{{ collection.name }}</h3>
                            <span>{{ collection.product_count }} {% trans "products" %}</span>
                        </div>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

{% comment %} <!-- أحدث المقالات -->
{% if blog_section %}
<section class="blog-section py-5">
    <div class="container">
        <h2 class="section-title text-center mb-5">{{ blog_section.title }}</h2>
        <div class="row">
            {% for post in blog_section.posts %}
            <div class="col-md-4 mb-4">
                <div class="blog-card">
                    <a href="{{ post.get_absolute_url }}">
                        <img src="{{ post.image.url }}" alt="{{ post.title }}" class="img-fluid">
                        <div class="blog-content">
                            <h3>{{ post.title }}</h3>
                            <p class="blog-excerpt">{{ post.excerpt|truncatewords:20 }}</p>
                            <span class="blog-date">{{ post.published_at|date:"d M Y" }}</span>
                        </div>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- العلامات التجارية -->
{% if brands_section %}
<section class="brands-section py-5 bg-light">
    <div class="container">
        <h2 class="section-title text-center mb-5">{{ brands_section.title }}</h2>
        <div class="brands-carousel">
            {% for brand in brands_section.brands %}
            <div class="brand-item">
                <a href="{{ brand.get_absolute_url }}">
                    <img src="{{ brand.logo.url }}" alt="{{ brand.name }}" class="img-fluid">
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %} {% endcomment %}

{% endblock %}

{% comment %} {% block extra_js %} {% endcomment %}
<script>
$(document).ready(function(){
    // Initialize sliders
    $('.hero-slider').slick({
        dots: true,
        infinite: true,
        speed: 500,
        fade: true,
        cssEase: 'linear',
        autoplay: true,
        autoplaySpeed: 5000
    });
    
    $('.products-carousel').slick({
        infinite: true,
        slidesToShow: 4,
        slidesToScroll: 1,
        responsive: [
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 3
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 2
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            }
        ]
    });
    
    $('.brands-carousel').slick({
        infinite: true,
        slidesToShow: 6,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 2000,
        responsive: [
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 4
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 3
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 2
                }
            }
        ]
    });
});
</script>
{% comment %} {% endblock %} {% endcomment %}