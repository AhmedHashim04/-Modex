{% load i18n %}

{% load socialaccount %}
{% get_current_language as LANGUAGE_CODE %}
<!-- A. Top navigation bar -->
<div class="modex-manage-nav modex-manage-nav-custom d-flex align-items-center justify-content-between px-2 px-md-3 py-1 flex-wrap"
     {% if LANGUAGE_CODE == "ar" %}dir="rtl"{% endif %}>
    <div class="d-flex align-items-center gap-2 gap-md-3 flex-wrap"
         {% if LANGUAGE_CODE == "ar" %}style="flex-direction: row-reverse;"{% endif %}>
        <!-- Account -->
        {% if user.is_authenticated %}
        <a href="{% url 'accounts:profile' %}" class="manage-nav-link d-flex align-items-center"
           {% if LANGUAGE_CODE == "ar" %}style="flex-direction: row-reverse;"{% endif %}>
            {% if LANGUAGE_CODE == "ar" %}
                <span class="d-none d-sm-inline">
                    {{ user.username }}
                </span>
                <i class="fas fa-user-circle ms-1"></i>
            {% else %}
                <i class="fas fa-user-circle me-1"></i>
                <span class="d-none d-sm-inline">
                    {{ user.username }}
                </span>
            {% endif %}
        </a>
        <!-- Wishlist -->
        <a href="{% url 'accounts:wishlist' %}" class="manage-nav-link d-flex align-items-center"
           {% if LANGUAGE_CODE == "ar" %}style="flex-direction: row-reverse;"{% endif %}>
            {% if LANGUAGE_CODE == "ar" %}
                <span class="d-none d-sm-inline">
                    ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©
                </span>
                <i class="fas fa-heart ms-1"></i>
            {% else %}
                <i class="fas fa-heart me-1"></i>
                <span class="d-none d-sm-inline">
                    Wishlist
                </span>
            {% endif %}
            {% comment %} <span class="badge bg-danger ms-1" id="wishlist-count" >{{ wishlist|length }}</span> {% endcomment %}
        </a>
        <a href="{% url 'order:order_list' %}" class="manage-nav-link d-flex align-items-center"
           {% if LANGUAGE_CODE == "ar" %}style="flex-direction: row-reverse;"{% endif %}>
            {% if LANGUAGE_CODE == "ar" %}
                <span class="d-none d-sm-inline">
                    ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™
                </span>
                <i class="fas fa-receipt ms-1"></i>
            {% else %}
                <i class="fas fa-receipt me-1"></i>
                <span class="d-none d-sm-inline">
                    Orders
                </span>
            {% endif %}
        </a>

        {% else %}

        <div class="d-flex align-items-center gap-2">
            <a href="{% provider_login_url 'google' %}"  id="google-login-btn"
            aria-label="Login with Google" class="manage-nav-link d-flex align-items-center" style="color: #4285F4;">
                    <i class="fab fa-google me-1"></i>
                    <span class="d-none d-sm-inline">
                        Login with Google
                    </span>
            </a>
            <script>
                document.getElementById('google-login-btn').addEventListener('click', function () {
                    this.innerHTML = '<span class="spinner-border spinner-border-sm"></span> Logging in...';
                });
            </script>
        </div>
        {% endif %}
        <a href="{% url 'product:product_list' %}" class="manage-nav-link d-flex align-items-center"
           {% if LANGUAGE_CODE == "ar" %}style="flex-direction: row-reverse;"{% endif %}>
            {% if LANGUAGE_CODE == "ar" %}
                <span class="d-none d-sm-inline">
                    ÿßŸÑŸÖÿ™ÿ¨ÿ±
                </span>
                <i class="fas fa-store ms-1"></i>
            {% else %}
                <i class="fas fa-store me-1"></i>
                <span class="d-none d-sm-inline">
                    Shop
                </span>
            {% endif %}
        </a>
        <button class="button_theme" id="themeSwitcher">üåì ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿ´ŸäŸÖ</button>

        <!-- Cart -->
        <a href="{% url 'cart:cart_list' %}" id="cart-nav-link" class="manage-nav-link d-flex align-items-center position-relative cart-advanced-link" id="cart-link"
                {% if LANGUAGE_CODE == "ar" %}style="flex-direction: row-reverse;"{% endif %}>
                {% if LANGUAGE_CODE == "ar" %}
                    <span class="d-none d-sm-inline fw-semibold">
                        ÿßŸÑÿ≥ŸÑÿ©
                        <span class="badge bg-warning text-dark rounded-pill ms-1 fs-6 fw-semibold cart-counter">
                            {{ cart.total_quantity|default:"Modex" }}
                        </span>                   


                    </span>
                    <i class="fas fa-shopping-cart ms-1 fs-5"></i>
                {% else %}
                    <i class="fas fa-shopping-cart me-1 fs-5"></i>
                    <span class="d-none d-sm-inline fw-semibold">
                        Cart
                        <span class="badge bg-warning text-dark rounded-pill ms-1 fs-6 fw-semibold cart-counter">
                            {% if LANGUAGE_CODE == "ar" %}
                                {{ cart.total_quantity|default:"Modex" }}
                            {% else %}
                                {{ cart.total_quantity|default:"Modex" }}
                            {% endif %}
                        </span>
                    </span>
            {% endif %}
        </a>
    </div>
</div>
<script>
const themes = [
  'theme-ocean', 'theme-sakura', 'theme-midnight',
  'theme-sunset', 'theme-night', 'theme-forest', 'theme-earth',
  'theme-pastel', 'theme-retro', 'theme-cool',
  'theme-mango', 'theme-candy', 'theme-coal'
];
  let currentIndex = 0;

  // ŸÑŸà ŸÅŸäŸá ÿ´ŸäŸÖ ŸÖÿ≠ŸÅŸàÿ∏
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme && themes.includes(savedTheme)) {
    document.body.classList.add(savedTheme);
    currentIndex = themes.indexOf(savedTheme);
  } else {
    document.body.classList.add(themes[0]);
  }

  document.getElementById('themeSwitcher').addEventListener('click', () => {
    document.body.classList.remove(themes[currentIndex]);
    currentIndex = (currentIndex + 1) % themes.length;
    const newTheme = themes[currentIndex];
    document.body.classList.add(newTheme);
    localStorage.setItem('theme', newTheme);
  });
</script>
