<section class="subcategories-circles-section py-4">
    <div class="container">
        <div class="row row-cols-2 row-cols-md-4 row-cols-lg-8 g-4 justify-content-center">
            <div class="col d-flex flex-column align-items-center">
                <div class="subcategory-circle electronics mx-auto mb-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/1250/1250645.png" alt="إلكترونيات">
                </div>
                <span class="d-block fw-semibold small subcategory-label-electronics">إلكترونيات</span>
                <a href="category.html?cat=electronics" class="stretched-link"></a>
            </div>
            <div class="col d-flex flex-column align-items-center">
                <div class="subcategory-circle fashion mx-auto mb-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/1250/1250653.png" alt="أزياء">
                </div>
                <span class="d-block fw-semibold small subcategory-label-fashion">أزياء</span>
                <a href="category.html?cat=fashion" class="stretched-link"></a>
            </div>
            <div class="col d-flex flex-column align-items-center">
                <div class="subcategory-circle beauty mx-auto mb-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/1250/1250671.png" alt="جمال">
                </div>
                <span class="d-block fw-semibold small subcategory-label-beauty">جمال</span>
                <a href="category.html?cat=beauty" class="stretched-link"></a>
            </div>
            <div class="col d-flex flex-column align-items-center">
                <div class="subcategory-circle home mx-auto mb-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/1250/1250683.png" alt="منزل">
                </div>
                <span class="d-block fw-semibold small subcategory-label-home">منزل</span>
                <a href="category.html?cat=home" class="stretched-link"></a>
            </div>
            <div class="col d-flex flex-column align-items-center">
                <div class="subcategory-circle toys mx-auto mb-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/1250/1250693.png" alt="ألعاب">
                </div>
                <span class="d-block fw-semibold small subcategory-label-toys">ألعاب</span>
                <a href="category.html?cat=toys" class="stretched-link"></a>
            </div>
            <div class="col d-flex flex-column align-items-center">
                <div class="subcategory-circle sports mx-auto mb-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/1250/1250704.png" alt="رياضة">
                </div>
                <span class="d-block fw-semibold small subcategory-label-sports">رياضة</span>
                <a href="category.html?cat=sports" class="stretched-link"></a>
            </div>
            <div class="col d-flex flex-column align-items-center">
                <div class="subcategory-circle groceries mx-auto mb-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/1250/1250714.png" alt="بقالة">
                </div>
                <span class="d-block fw-semibold small subcategory-label-groceries">بقالة</span>
                <a href="category.html?cat=groceries" class="stretched-link"></a>
            </div>
            <div class="col d-flex flex-column align-items-center">
                <div class="subcategory-circle automotive mx-auto mb-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/1250/1250724.png" alt="سيارات">
                </div>
                <span class="d-block fw-semibold small subcategory-label-automotive">سيارات</span>
                <a href="category.html?cat=automotive" class="stretched-link"></a>
            </div>
            <div class="col d-flex flex-column align-items-center">
                <div class="subcategory-circle scanner mx-auto mb-2">
                    <i class="fas fa-qrcode fa-2x"></i>
                </div>
                <span class="d-block fw-semibold small subcategory-label-scanner">مسح باركود</span>
                <button type="button" class="btn btn-primary stretched-link" data-bs-toggle="modal" data-bs-target="#scannerModal">مسح باركود</button>
            </div>
        </div>
    </div>
</section>

<!-- Scanner Modal -->
<div class="modal fade" id="scannerModal" tabindex="-1" aria-labelledby="scannerModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="scannerModalLabel">مسح باركود</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>الرجاء مسح باركود المنتج</p>
                <div class="d-flex justify-content-center">
                    <video id="scanner-video" width="100%" height="300"></video>
                </div>
                <div class="d-flex justify-content-center mt-3">
                    <button type="button" class="btn btn-primary" id="scanner-close-btn">إغلاق</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Scanner
    const scannerVideo = document.getElementById('scanner-video');
    const scannerCloseBtn = document.getElementById('scanner-close-btn');

    scannerCloseBtn.addEventListener('click', () => {
        scannerVideo.srcObject.getTracks().forEach(track => {
            track.stop();
        });
        $('#scannerModal').modal('hide');
    });

    // Start scanning
    var scanner = new Instascan.Scanner({ video: scannerVideo, scanPeriod: 5 });
    scanner.addListener('scan', function (content, image) {
        console.log(content);
        alert('Barcode scanned: ' + content);
    });
    Instascan.Camera.getCameras().then(function (cameras) {
        if (cameras.length > 0) {
            scanner.start(cameras[0]);
        } else {
            console.error('No cameras found.');
        }
    }).catch(function (e) {
        console.error(e);
    });
</script>

